#!/usr/bin/env python3

description = """
    ğŸ‘½ EMOJIPHER ğŸ‘½
    
    Your favorite encryption tool!
    
    Are you bored of cryptographically safe means of encryption like AES256?
    You hate asymmetric encryption?
    You are a modern human that loves big hard drives and emojis?
    You want to waste as much bandwith as you can?
    You want to choke NSA and TENCENT servers with emoji?

    If you answered any of those questions with YES, this script is for you.
    
    Encrypt your data by turning each byte of source file into emoji! Yes, thats right.
    Each byte becomes 4 bytes! And you get multiple emoji possibilities per byte!
    Frequency analysis? More like waste of electricity.
    
    Okay, I want this, but how do I start?
    
    1. Generate your personal key by issuing. It will append .emojipher to the end of your given name.
        $ ./emojipher.py -g my_key
        
    2. Encrypt some data!
        $ ./emojipher.py -e my_secrets.txt -k my_key.emojipher
        
    3. ... Do whatever you want, store it, send it, share it ğŸ¤¡
    
    4. Decrypt your precious data.
        $ ./emojipher.py -d my_secrets.txt.encrypted -k my_key.emojipher
        
    5. Enjoy your decrypted data, but make sure you are alone.
    
    Made with ğŸ¤¡ by the ğŸ¤¤ in www.exception.lt
    """

changelog = """
ğŸ‘½ EMOJIPHER CHANGELOG ğŸ‘½

10.10.2020
+ made everything async, because why not. i have not checked if it made it faster/slower, but added because it is hype to do async.
+ fixed decryption making file disappear.
- removed emojipedia depedency by hardcoding emojis into the file. 5kb to 25kb file, but no pip installs needed. uses standardlib. if argparse is in standardlib.
+ decrypted message does not replace og message, it will be named <input_file>.decrypted, like you pass <message_file>.encrypted to the decryptor.

"""

from argparse import ArgumentParser, RawDescriptionHelpFormatter

# from emojipedia import (
#    Emojipedia,
# )  # replace with a massive list of hardcoded emojis lol.
import asyncio
import secrets
import os.path
import ast


async def get_all_emojis() -> set:
    """You like hardcoded emoji set? Here you go ;)"""
    # return set([x.character for x in Emojipedia.all() if len(str(x.character)) == 1])

    return {
        "ğŸ’†",
        "ğŸ•",
        "ğŸ¥",
        "ğŸ“£",
        "ğŸ®",
        "ğŸˆ",
        "\U0001faa2",
        "ğŸ",
        "ğŸ¦²",
        "ğŸ“¥",
        "\U0001f9a4",
        "ğŸ’œ",
        "ğŸŒ»",
        "ğŸ“Œ",
        "ğŸ‹",
        "ğŸ¦¯",
        "ğŸ‡¿",
        "ğŸ­",
        "ğŸ“",
        "ğŸŒ°",
        "ğŸŒ‡",
        "\U000e0034",
        "ğŸ¾",
        "ğŸ©",
        "\U000e0072",
        "ğŸ¤¦",
        "ğŸ¨",
        "ğŸ§‰",
        "ğŸ‡ª",
        "ğŸª",
        "ğŸ›€",
        "ğŸŒ",
        "ğŸ”—",
        "ğŸ¥¢",
        "ğŸ’€",
        "\U000e005e",
        "ğŸœ",
        "ğŸ¤¡",
        "\U000e006a",
        "ğŸ ",
        "ğŸ³",
        "\U0001fa9a",
        "\U000e005c",
        "\U000e0049",
        "ğŸš§",
        "ğŸ¥‰",
        "ğŸ‘¾",
        "ğŸŒˆ",
        "\U000e004f",
        "ğŸ‘¡",
        "ğŸ‘‘",
        "ğŸ”…",
        "â¬›",
        "ğŸ¥ˆ",
        "ğŸš¹",
        "ğŸš„",
        "ğŸ¥",
        "\U0001fab1",
        "ğŸš’",
        "ğŸ• ",
        "ğŸ’¯",
        "ğŸ¤²",
        "ğŸ§…",
        "ğŸ’²",
        "ğŸ¤—",
        "ğŸ˜º",
        "ğŸ‘š",
        "ğŸ”¼",
        "ğŸ•œ",
        "ğŸ†˜",
        "â˜”",
        "ğŸ”¦",
        "ğŸ°",
        "ğŸ¥‹",
        "ğŸ’¹",
        "\U000e002a",
        "ğŸŸ¦",
        "ğŸ±",
        "ğŸ¤",
        "ğŸ¦–",
        "ğŸŒŠ",
        "ğŸ¥„",
        "ğŸ˜",
        "ğŸ˜–",
        "ğŸ‡",
        "ğŸ§¤",
        "ğŸ“ƒ",
        "ğŸŒ‰",
        "ğŸ“‰",
        "ğŸ’ ",
        "ğŸ§‘",
        "ğŸ¥¤",
        "ğŸ”¶",
        "ğŸ±",
        "ğŸ“›",
        "ğŸ˜",
        "ğŸŒ‹",
        "ğŸ˜³",
        "ğŸˆ",
        "ğŸ˜„",
        "ğŸ•",
        "ğŸ¥¾",
        "âš½",
        "ğŸ˜§",
        "ğŸ˜",
        "\U0001fab0",
        "ğŸ¨",
        "\U0001f977",
        "ğŸ¥",
        "ğŸ›‚",
        "â˜•",
        "ğŸ“",
        "ğŸ’£",
        "ğŸ” ",
        "ğŸ”•",
        "ğŸ””",
        "ğŸ“”",
        "\U000e0023",
        "ğŸ",
        "ğŸ¤º",
        "ğŸˆ´",
        "ğŸ‘µ",
        "ğŸ§„",
        "ğŸ¦Ÿ",
        "ğŸ¼",
        "ğŸš",
        "ğŸ‘Š",
        "ğŸ”­",
        "ğŸ•§",
        "ğŸ¤–",
        "ğŸ™Š",
        "â™",
        "ğŸ’»",
        "\U000e003b",
        "ğŸ›¹",
        "ğŸŒ",
        "\U000e0042",
        "ğŸŠ",
        "\U000e0066",
        "ğŸ§—",
        "\U000e0053",
        "ğŸµ",
        "ğŸŠ",
        "ğŸ––",
        "ğŸ§",
        "ğŸš‹",
        "ğŸ—½",
        "ğŸ‘¢",
        "ğŸŒŒ",
        "ğŸ¹",
        "ğŸ˜‰",
        "ğŸ¤š",
        "ğŸ‘·",
        "\U000e0031",
        "ğŸ¤™",
        "ğŸ¦",
        "ğŸ‡©",
        "ğŸ”“",
        "ğŸš",
        "ğŸšœ",
        "ğŸ˜´",
        "ğŸ¤£",
        "\U000e002e",
        "ğŸŸ",
        "\U0001f9ac",
        "ğŸ“µ",
        "ğŸŒ",
        "\U000e004a",
        "\U000e0030",
        "ğŸ‘¬",
        "ğŸ",
        "ğŸ“ ",
        "ğŸ“˜",
        "ğŸ©¸",
        "\U000e002c",
        "ğŸ‚",
        "âŒš",
        "\U000e0033",
        "\U000e0071",
        "ğŸ’¶",
        "ğŸ™",
        "ğŸ§«",
        "ğŸƒ",
        "ğŸ",
        "âš“",
        "ğŸ•",
        "âŒ",
        "â–",
        "ğŸ“–",
        "ğŸ‘«",
        "ğŸŒ ",
        "ğŸ˜†",
        "ğŸ¤Ÿ",
        "ğŸŒ·",
        "ğŸŸ©",
        "ğŸ¦§",
        "ğŸ’ˆ",
        "ğŸ¦",
        "ğŸ´",
        "ğŸ€„",
        "ğŸ’´",
        "â™“",
        "ğŸ¦º",
        "\u200d",
        "ğŸ¾",
        "ğŸ¦´",
        "ğŸ“",
        "ğŸ‰",
        "ğŸ¡",
        "\U000e0036",
        "ğŸ¥Ÿ",
        "ğŸ‘”",
        "ğŸ‘Œ",
        "ğŸ·",
        "ğŸ§¾",
        "ğŸ›‘",
        "ğŸ˜ª",
        "ğŸ˜œ",
        "\U0001fa74",
        "ğŸ”¤",
        "ğŸ",
        "ğŸ•”",
        "ğŸ”",
        "ğŸ“š",
        "ğŸ•",
        "ğŸ“±",
        "\U000e0076",
        "\U000e0070",
        "ğŸ¾",
        "ğŸ›¸",
        "ğŸ§",
        "ğŸ¦¨",
        "ğŸ¨",
        "ğŸ¸",
        "ğŸ“‘",
        "ğŸ¡",
        "\U0001faa1",
        "â—¾",
        "\U0001fa98",
        "ğŸ”",
        "ğŸšˆ",
        "ğŸ•Ÿ",
        "ğŸš‘",
        "ğŸ†“",
        "\U000e0077",
        "ğŸˆµ",
        "\U000e005f",
        "\U000e003f",
        "ğŸ§¸",
        "ğŸ‡´",
        "ğŸ»",
        "ğŸŒ¯",
        "ğŸ³",
        "\U000e004c",
        "ğŸ’ƒ",
        "ğŸŒ­",
        "ğŸ§”",
        "\U000e0057",
        "ğŸ“¤",
        "ğŸ¦ˆ",
        "ğŸ¥",
        "ğŸ",
        "ğŸšŒ",
        "ğŸ¤¿",
        "ğŸ§",
        "ğŸ’¤",
        "ğŸ˜š",
        "ğŸ‘ˆ",
        "ğŸ§“",
        "ğŸ‡­",
        "ğŸ›",
        "ğŸ“œ",
        "ğŸ¤",
        "ğŸš¿",
        "ğŸš²",
        "ğŸ’¢",
        "ğŸª€",
        "ğŸ‘ƒ",
        "ğŸ•’",
        "ğŸ¦·",
        "ğŸ¥œ",
        "\U000e0064",
        "ğŸš…",
        "ğŸ“°",
        "ğŸ‘",
        "ğŸ“®",
        "ğŸ’¸",
        "ğŸ",
        "ğŸ’",
        "\U000e0021",
        "ğŸ§®",
        "ğŸ",
        "ğŸ¦‘",
        "\U0001fad6",
        "ğŸ“†",
        "ğŸ§",
        "ğŸ’¿",
        "ğŸ‘",
        "ğŸ˜¯",
        "â›º",
        "ğŸ¥Œ",
        "ğŸ’",
        "ğŸ‘—",
        "ğŸ¤",
        "ğŸ£",
        "ğŸ‰‘",
        "ğŸˆ¯",
        "ğŸ»",
        "\U000e0027",
        "\U000e0056",
        "ğŸ¦",
        "ğŸ¦",
        "ğŸ§",
        "ğŸ“…",
        "ğŸ†•",
        "ğŸ‘¯",
        "ğŸ˜¥",
        "ğŸ§Š",
        "ğŸš‰",
        "ğŸ’±",
        "ğŸ¦¢",
        "ğŸ˜‡",
        "ğŸ•",
        "ğŸ“¹",
        "ğŸšƒ",
        "ğŸ™",
        "ğŸ»",
        "ğŸ”’",
        "ğŸ¦©",
        "ğŸ“",
        "ğŸ˜›",
        "ğŸ™‰",
        "ğŸŒ¼",
        "ğŸ‘‚",
        "ğŸ¥…",
        "ğŸ¤›",
        "âƒ£",
        "ğŸ‘’",
        "ğŸ³",
        "\U000e0059",
        "ğŸ“»",
        "ğŸ¤•",
        "ğŸ°",
        "ğŸ•™",
        "ğŸ¸",
        "ğŸ£",
        "ğŸ’‰",
        "ğŸ‹",
        "ğŸ‡",
        "ğŸª•",
        "ğŸª",
        "ğŸš",
        "â™‰",
        "\U0001fa97",
        "ğŸ¦¶",
        "\U0001f6d6",
        "ğŸ¦½",
        "ğŸ²",
        "\U000e0060",
        "ğŸ’‹",
        "ğŸ§¦",
        "ğŸ…",
        "ğŸ’¦",
        "\U000e0035",
        "ğŸ“•",
        "\U0001fab3",
        "ğŸ§²",
        "ğŸ’°",
        "ğŸ’¬",
        "ğŸ’š",
        "ğŸ§ƒ",
        "ğŸŠ",
        "ğŸ§´",
        "ğŸŒµ",
        "ğŸš±",
        "ğŸš¸",
        "ğŸš™",
        "ğŸ¶",
        "ğŸ‘ª",
        "\U000e0068",
        "ğŸ©",
        "ğŸ˜¾",
        "ğŸ’‡",
        "ğŸ”³",
        "ğŸ˜—",
        "â™Œ",
        "ğŸ“·",
        "ğŸ†’",
        "ğŸ¥¼",
        "ğŸŒ•",
        "ğŸ†",
        "ğŸ™‹",
        "\U000e0074",
        "ğŸ‡¶",
        "ğŸŸ£",
        "ğŸš¡",
        "\U0001fad5",
        "ğŸŒ",
        "ğŸš€",
        "ğŸ“—",
        "ğŸ’Œ",
        "â›²",
        "ğŸ",
        "ğŸ§‡",
        "\U0001faa5",
        "ğŸ›„",
        "ğŸŒ˜",
        "ğŸŒ€",
        "ğŸª’",
        "ğŸ¥º",
        "ğŸ§¡",
        "ğŸ”¡",
        "ğŸ®",
        "ğŸ¹",
        "âšª",
        "ğŸ¦š",
        "ğŸ¤¢",
        "ğŸ¥¨",
        "ğŸ—»",
        "ğŸ“³",
        "ğŸ™ˆ",
        "ğŸ‡§",
        "ğŸ¥‚",
        "ğŸ›ƒ",
        "ğŸ¥±",
        "ğŸ¢",
        "ğŸ¦ª",
        "ğŸŒ›",
        "ğŸ®",
        "ğŸ”«",
        "ğŸ¤”",
        "ğŸ¸",
        "ğŸ‡¯",
        "\U0001fac2",
        "\U000e004d",
        "ğŸŒ–",
        "ğŸˆ",
        "ğŸ™",
        "ğŸ’",
        "ğŸ¬",
        "ğŸ’",
        "ğŸ‡¦",
        "ğŸ„",
        "ğŸ¤",
        "ğŸ¹",
        "ğŸ½",
        "ğŸ’•",
        "ğŸ¥",
        "ğŸ",
        "\U000e0048",
        "ğŸ“",
        "ğŸ”º",
        "ğŸ",
        "ğŸ‡",
        "\U0001fa9d",
        "\U0001f9ad",
        "ğŸ•Œ",
        "\U000e0046",
        "ğŸ›¬",
        "ğŸ“º",
        "ğŸ¦œ",
        "ğŸš·",
        "\U000e0028",
        "ğŸ£",
        "ğŸ¦Š",
        "ğŸ™†",
        "ğŸ˜¦",
        "ğŸ’¾",
        "ğŸ¥‡",
        "ğŸ“¿",
        "ğŸ†–",
        "ğŸ¥¿",
        "ğŸ•˜",
        "ğŸ€",
        "ğŸ©²",
        "ğŸ¥°",
        "\U0001fac1",
        "ğŸ’",
        "ğŸŒ",
        "ğŸ¥",
        "ğŸš¶",
        "ğŸ¬",
        "ğŸš",
        "ğŸ•“",
        "ğŸ¹",
        "ğŸ‰",
        "ğŸ“™",
        "ğŸ¤µ",
        "ğŸ¥–",
        "\U000e004b",
        "ğŸ¤¹",
        "â›",
        "ğŸ”›",
        "ğŸ˜°",
        "ğŸŒº",
        "ğŸ˜ˆ",
        "ğŸ‘»",
        "ğŸ”–",
        "ğŸ¥£",
        "ğŸ”œ",
        "ğŸ…",
        "\U0001fa85",
        "â›„",
        "ğŸ˜’",
        "ğŸ¦¿",
        "ğŸ˜‚",
        "ğŸŸ¡",
        "ğŸ§©",
        "ğŸš´",
        "ğŸ¥µ",
        "ğŸ¤’",
        "ğŸ©º",
        "ğŸ“Ÿ",
        "ğŸ¤§",
        "\U000e0029",
        "ğŸ‡¸",
        "ğŸ„",
        "ğŸ™„",
        "ğŸš«",
        "\U000e007e",
        "ğŸ˜",
        "ğŸŒ½",
        "ğŸŸ ",
        "ğŸš›",
        "ğŸ¤¬",
        "â™¿",
        "ğŸ’©",
        "ğŸ’",
        "\U000e002f",
        "\U0001fa96",
        "ğŸ’§",
        "ğŸ‡¨",
        "ğŸ”",
        "ğŸ§Ÿ",
        "ğŸ¢",
        "\U0001f6fb",
        "ğŸ•º",
        "ğŸ”‘",
        "ğŸ˜¤",
        "ğŸ‘Ÿ",
        "ğŸ",
        "ğŸ’",
        "ğŸ“¢",
        "\U000e0069",
        "ğŸ“",
        "âœ¨",
        "ğŸš¼",
        "\U000e007b",
        "ğŸ«",
        "ğŸ‘†",
        "\U000e0045",
        "\U0001fa9f",
        "ğŸ–•",
        "â›³",
        "ğŸ­",
        "ğŸƒ",
        "ğŸ§›",
        "ğŸ¤",
        "ğŸ§•",
        "ğŸ†™",
        "âš¡",
        "ğŸ§º",
        "ğŸ’„",
        "ğŸ¥¦",
        "ğŸ¦¦",
        "ğŸ‡º",
        "ğŸ¥»",
        "\U000e0063",
        "\U0001f9a3",
        "ğŸ’",
        "\U0001fac0",
        "ğŸ¥",
        "ğŸ‘œ",
        "ğŸš©",
        "ğŸ‘–",
        "ğŸ§‚",
        "ğŸŸ§",
        "\U000e007c",
        "ğŸ“‡",
        "ğŸ‡°",
        "ğŸš",
        "ğŸ¬",
        "ğŸª”",
        "\U0001faa4",
        "â—",
        "ğŸ¥™",
        "ğŸ",
        "ğŸš½",
        "ğŸŒ¾",
        "â—",
        "ğŸ•—",
        "ğŸ”½",
        "ğŸŸª",
        "\U0001fad2",
        "ğŸ¥§",
        "ğŸ¥³",
        "ğŸŸ¥",
        "ğŸ¦",
        "ğŸ“¼",
        "ğŸ",
        "\U0001fa9e",
        "ğŸ”ƒ",
        "ğŸ¥’",
        "ğŸµ",
        "ğŸ••",
        "ğŸ¦³",
        "ğŸ—",
        "ğŸ‘",
        "ğŸ§œ",
        "ğŸµ",
        "ğŸ¦™",
        "\U000e0051",
        "ğŸ»",
        "ğŸ§ˆ",
        "ğŸ‘™",
        "âœ…",
        "ğŸ¤˜",
        "ğŸª",
        "ğŸ¥ ",
        "\U000e0020",
        "\U000e0062",
        "ğŸ‘",
        "\U000e0079",
        "ğŸ“¬",
        "\U0001f9ab",
        "\U000e006e",
        "ğŸš¥",
        "ğŸ“¨",
        "ğŸ”®",
        "ğŸ‘¤",
        "ğŸ­",
        "ğŸ“´",
        "ğŸ",
        "ğŸ‡¼",
        "ğŸ‰",
        "ğŸš•",
        "ğŸ‘",
        "ğŸ¡",
        "ğŸ•›",
        "ğŸš ",
        "ğŸ«",
        "ğŸ˜",
        "ğŸš‚",
        "ğŸ›«",
        "ğŸ˜¿",
        "ğŸ",
        "ğŸ’’",
        "ğŸ’",
        "ğŸš¦",
        "\U000e0061",
        "ğŸš¤",
        "ğŸ˜™",
        "âª",
        "ğŸ¦‡",
        "â©",
        "ğŸŒ™",
        "ğŸ‡²",
        "ğŸ“",
        "ğŸ†š",
        "ğŸ§±",
        "ğŸ‘‹",
        "\U000e0038",
        "ğŸ¤",
        "ğŸ•¤",
        "ğŸ¤¸",
        "ğŸ˜Œ",
        "ğŸ•¥",
        "ğŸŒ³",
        "ğŸ¥",
        "ğŸ”Š",
        "ğŸ‘©",
        "ğŸ¤·",
        "â›½",
        "ğŸ¦„",
        "ğŸ™",
        "ğŸŸ¢",
        "ğŸ‡«",
        "ğŸ‘",
        "ğŸ¤",
        "ğŸŒœ",
        "â›ª",
        "\U000e0067",
        "ğŸ¼",
        "ğŸ‘°",
        "ğŸ¥½",
        "ğŸ¼",
        "ğŸ”²",
        "ğŸ‡³",
        "ğŸ˜¶",
        "ğŸ¥«",
        "ğŸ§§",
        "ğŸ˜Š",
        "ğŸ‘¹",
        "ğŸŒƒ",
        "ğŸ‘¦",
        "ğŸª‚",
        "ğŸ’µ",
        "ğŸ‘¿",
        "ğŸ“¡",
        "ğŸ€",
        "ğŸ“¯",
        "ğŸ´",
        "â«",
        "ğŸ§¬",
        "ğŸŒ¿",
        "ğŸˆ¶",
        "ğŸª",
        "â°",
        "ğŸ”™",
        "ğŸ•‹",
        "ğŸˆš",
        "ğŸ‡±",
        "ğŸ§°",
        "ğŸ”¸",
        "ğŸ™",
        "ğŸš",
        "ğŸš",
        "ğŸ˜",
        "ğŸ”Ÿ",
        "ğŸ˜‘",
        "ğŸ§¢",
        "ğŸ‘„",
        "ğŸ§",
        "ğŸ§",
        "ğŸ©³",
        "ğŸ˜¢",
        "\U000e0032",
        "\U000e005b",
        "ğŸ”¹",
        "ğŸ¥",
        "ğŸ‘±",
        "ğŸ˜",
        "ğŸ““",
        "ğŸ¦",
        "ğŸŸ",
        "\U000e0041",
        "â™ˆ",
        "ğŸˆ¹",
        "ğŸ“€",
        "ğŸ”",
        "ğŸ¼",
        "â™Š",
        "ğŸ§¯",
        "ğŸ‘º",
        "ğŸ‘",
        "ğŸ•¢",
        "ğŸ‘…",
        "â›…",
        "ğŸ¤",
        "ğŸ˜²",
        "ğŸš¬",
        "â“",
        "ğŸŒ‘",
        "ğŸ¦˜",
        "ğŸ‡·",
        "\U0001fab4",
        "ğŸ¥‘",
        "ğŸ¦°",
        "ğŸ‡®",
        "â™",
        "ğŸš‡",
        "\U000e003d",
        "ğŸ˜Ÿ",
        "ğŸŒ…",
        "ğŸ±",
        "ğŸ”¨",
        "ğŸ¦’",
        "ğŸ”",
        "ğŸš­",
        "ğŸ‰",
        "\U0001f6d7",
        "ğŸ•",
        "ğŸ‘¶",
        "ğŸ˜¨",
        "â™",
        "ğŸ¥•",
        "\U000e005a",
        "ğŸ¦",
        "â”",
        "ğŸ“ˆ",
        "\U000e0058",
        "ğŸ§¶",
        "ğŸ¥˜",
        "ğŸ™Œ",
        "ğŸ’¼",
        "ğŸ ",
        "\U000e005d",
        "ğŸŸ¤",
        "ğŸš¨",
        "ğŸ¤¾",
        "ğŸ”†",
        "ğŸ¤´",
        "ğŸ…",
        "ğŸ“ª",
        "ğŸ§£",
        "ğŸ‘‡",
        "ğŸ‘´",
        "ğŸ“Š",
        "\U000e003e",
        "ğŸ¦Œ",
        "\U000e0078",
        "ğŸ¶",
        "ğŸ˜·",
        "ğŸ˜½",
        "ğŸ¦",
        "\U0001fad0",
        "ğŸ’ª",
        "ğŸ¥“",
        "\U0001fa84",
        "ğŸ‘¼",
        "ğŸ€",
        "ğŸ’Š",
        "â›”",
        "\U000e004e",
        "âš«",
        "ğŸ˜‹",
        "ğŸ‘‰",
        "ğŸƒ",
        "ğŸ¾",
        "ğŸ¤©",
        "ğŸ†—",
        "\U0001f9cb",
        "ğŸ”˜",
        "ğŸ¤°",
        "ğŸ˜€",
        "ğŸš—",
        "ğŸš¾",
        "ğŸ¤­",
        "ğŸ¦…",
        "ğŸ¦ƒ",
        "ğŸ†",
        "ğŸ‘­",
        "ğŸ›Œ",
        "ğŸŒ±",
        "ğŸ™",
        "ğŸ™‡",
        "ğŸ˜¹",
        "ğŸ§¨",
        "ğŸŒ—",
        "ğŸ©±",
        "ğŸ¦€",
        "ğŸ§",
        "ğŸ˜“",
        "ğŸ‚",
        "ğŸšŸ",
        "âœŠ",
        "\U000e0044",
        "ğŸ¥´",
        "ğŸš£",
        "\U000e0039",
        "â™",
        "ğŸ§³",
        "ğŸ§’",
        "ğŸ¥­",
        "ğŸ¦“",
        "ğŸš¢",
        "ğŸ¤¯",
        "ğŸ‘ ",
        "âœ‹",
        "ğŸ˜¸",
        "\U0001faa3",
        "ğŸ’®",
        "ğŸ“¶",
        "ğŸ’­",
        "ğŸš³",
        "ğŸ‘¨",
        "â™‹",
        "ğŸ§",
        "ğŸº",
        "ğŸ”ˆ",
        "ğŸ’—",
        "ğŸ½",
        "ğŸ›º",
        "ğŸ§–",
        "ğŸ¤¨",
        "\U000e003c",
        "ğŸ©¹",
        "ğŸ¤³",
        "ğŸš»",
        "ğŸ‡¬",
        "ğŸ–",
        "ğŸ¯",
        "ğŸ†",
        "ğŸ°",
        "ğŸˆ¸",
        "ğŸ¥”",
        "ğŸ¿",
        "ğŸ’Ÿ",
        "ğŸ”°",
        "ğŸ”‡",
        "ğŸŒ”",
        "ğŸ¥›",
        "ğŸ¬",
        "ğŸ¤¼",
        "ğŸ§»",
        "ğŸ¥©",
        "ğŸ‘¸",
        "ğŸ¨",
        "ğŸ”¥",
        "ğŸ§¹",
        "ğŸ–",
        "ğŸ˜®",
        "ğŸ†”",
        "ğŸ˜±",
        "ğŸ”",
        "ğŸ˜",
        "ğŸ˜¬",
        "ğŸ¤¶",
        "ğŸ’·",
        "ğŸ¥ª",
        "ğŸ›¶",
        "ğŸ“",
        "ğŸ›´",
        "ğŸ§­",
        "ğŸ­",
        "ğŸˆ³",
        "ğŸ’",
        "ğŸª",
        "ğŸ¦”",
        "ğŸ›’",
        "â°",
        "\U0001f90c",
        "ğŸš˜",
        "ğŸŒ®",
        "ğŸ¦‚",
        "ğŸ”±",
        "ğŸ¤“",
        "ğŸˆ",
        "ğŸ¸",
        "ğŸ¦›",
        "\U000e002d",
        "ğŸ¥",
        "ğŸ›µ",
        "\U0001faa0",
        "ğŸ",
        "\U000e006d",
        "ğŸ‡µ",
        "ğŸ”",
        "ğŸ“¦",
        "ğŸ–¤",
        "ğŸ†",
        "ğŸ§·",
        "\U000e006c",
        "ğŸ“",
        "ğŸ“­",
        "ğŸ«",
        "â³",
        "ğŸ›",
        "ğŸ·",
        "\U000e0022",
        "\U000e0024",
        "ğŸ’–",
        "âš¾",
        "ğŸ‹",
        "\U0001fab5",
        "ğŸ“’",
        "ğŸ‘",
        "ğŸ®",
        "ğŸ„",
        "â­•",
        "ğŸ·",
        "ğŸ“",
        "ğŸ‘›",
        "ğŸš",
        "\U000e007d",
        "ğŸŒ",
        "ğŸŒš",
        "ğŸª",
        "ğŸ•‘",
        "ğŸ˜",
        "\U000e0075",
        "ğŸ˜…",
        "ğŸ¿",
        "ğŸ”‰",
        "ğŸ¥ƒ",
        "ğŸšµ",
        "ğŸŸ¨",
        "ğŸ”µ",
        "ğŸ´",
        "ğŸ•¦",
        "\U000e0073",
        "ğŸ˜»",
        "ğŸ™…",
        "â—½",
        "â•",
        "ğŸˆ²",
        "\U000e0065",
        "ğŸ•š",
        "ğŸ‡¹",
        "ğŸ˜ ",
        "ğŸ¥¶",
        "ğŸ•–",
        "ğŸ”„",
        "ğŸ¤ª",
        "ğŸ¤ ",
        "ğŸ‘®",
        "ğŸ”‹",
        "ğŸ¤‘",
        "\U000e007f",
        "ğŸŒ",
        "ğŸ¤¥",
        "ğŸ’…",
        "â­",
        "ğŸ¤œ",
        "ğŸƒ",
        "ğŸšš",
        "ğŸ’“",
        "ğŸœ",
        "ğŸš°",
        "ğŸ§€",
        "ğŸ¶",
        "ğŸ°",
        "ğŸ¤¤",
        "ğŸ§¥",
        "ğŸ€",
        "\U000e0037",
        "ğŸ¦¥",
        "ğŸº",
        "ğŸ‡½",
        "â¬œ",
        "ğŸ¥š",
        "â",
        "ğŸ¦¡",
        "ğŸ‡",
        "ğŸ¦¾",
        "ğŸ¤",
        "ğŸ¯",
        "ğŸ‘€",
        "ğŸ‘",
        "ğŸ§†",
        "ğŸ",
        "ğŸŒ’",
        "ğŸ˜˜",
        "ğŸš",
        "ğŸ™€",
        "ğŸ¤",
        "\U0001f6fc",
        "ğŸ¥—",
        "ğŸ“‚",
        "\U000e0040",
        "\U000e006f",
        "ğŸ“„",
        "ğŸ©",
        "ğŸ•¡",
        "ğŸšª",
        "ğŸ”§",
        "ğŸ˜©",
        "ğŸ—¿",
        "ğŸ¦—",
        "ğŸŒ",
        "\U0001f972",
        "ğŸ¥€",
        "ğŸ„",
        "ğŸ§ª",
        "\U000e0043",
        "ğŸ”»",
        "ğŸª‘",
        "ğŸ”¬",
        "\U000e0052",
        "ğŸ“¸",
        "ğŸ¤½",
        "\U0001fa86",
        "ğŸ§™",
        "\U000e0025",
        "ğŸ™ƒ",
        "ğŸ™‚",
        "ğŸ’˜",
        "ğŸŒ²",
        "ğŸ•£",
        "ğŸ•",
        "\U0001faa7",
        "\U000e003a",
        "\U0001fad4",
        "â™‘",
        "ğŸ›…",
        "ğŸ˜­",
        "ğŸ”",
        "â•",
        "ğŸ†",
        "ğŸ¯",
        "ğŸ“©",
        "ğŸŒ¸",
        "ğŸ”¯",
        "ğŸ¦‹",
        "ğŸ¦",
        "ğŸ¦±",
        "ğŸ”ª",
        "ğŸ¯",
        "ğŸ©",
        "ğŸ˜«",
        "ğŸ¿",
        "\U000e002b",
        "\U0001fa9c",
        "\U0001faa8",
        "ğŸ“²",
        "ğŸšº",
        "ğŸ¦",
        "ğŸŒ¹",
        "ğŸ¦µ",
        "ğŸ½",
        "ğŸŒ†",
        "ğŸŒ´",
        "ğŸ‘£",
        "ğŸ§š",
        "ğŸŠ",
        "ğŸ“‹",
        "ğŸ†‘",
        "ğŸ«",
        "ğŸ§½",
        "ğŸ’",
        "ğŸ¦¸",
        "ğŸ‘½",
        "ğŸ—¾",
        "ğŸ§",
        "\U000e0026",
        "\U000e006b",
        "ğŸ¤®",
        "ğŸ”‚",
        "ğŸŒŸ",
        "ğŸ—¼",
        "ğŸ",
        "ğŸ”©",
        "ğŸ‘¥",
        "ğŸ˜ƒ",
        "ğŸ©°",
        "ğŸ",
        "ğŸº",
        "ğŸ“",
        "ğŸ˜µ",
        "ğŸš¯",
        "â¿",
        "ğŸ’‘",
        "ğŸ£",
        "ğŸ¦¼",
        "ğŸ§ ",
        "ğŸ”€",
        "ğŸ¥®",
        "ğŸ ",
        "ğŸ—",
        "\U000e0054",
        "ğŸ¦¹",
        "ğŸ’¥",
        "ğŸ”·",
        "ğŸƒ",
        "ğŸ¢",
        "ğŸ’º",
        "ğŸ›·",
        "ğŸ´",
        "ğŸ²",
        "ğŸ¦»",
        "ğŸ‡¾",
        "ğŸŒ",
        "âŒ›",
        "ğŸ‚",
        "ğŸ˜¼",
        "ğŸ¦†",
        "\U0001fad3",
        "\U0001fad1",
        "ğŸ’‚",
        "\U0001fa99",
        "ğŸ”¢",
        "ğŸŒ„",
        "ğŸ‘“",
        "ğŸ¥¥",
        "â›µ",
        "\U0001fa9b",
        "ğŸˆ",
        "ğŸ”",
        "ğŸ›•",
        "ğŸ‘˜",
        "ğŸ‘³",
        "ğŸ¥¯",
        "ğŸ¥¡",
        "ğŸ‰",
        "ğŸ’™",
        "ğŸ‘•",
        "ğŸª“",
        "ğŸ§",
        "\U000e007a",
        "ğŸ‘",
        "ğŸ˜£",
        "ğŸ“«",
        "ğŸ’¨",
        "ğŸ§¿",
        "\U0001fa83",
        "ğŸ",
        "\U0001fab6",
        "ğŸ‘²",
        "ğŸ§˜",
        "ğŸ›",
        "ğŸŒ“",
        "ğŸš–",
        "ğŸ¡",
        "ğŸš†",
        "ğŸ’¡",
        "ï¸",
        "ğŸŒ",
        "ğŸ§¼",
        "ğŸ‘§",
        "\U0001f978",
        "ğŸ“§",
        "ğŸ‚",
        "ğŸ’›",
        "ğŸ’«",
        "ğŸ’”",
        "ğŸ²",
        "ğŸ”Œ",
        "ğŸ‡»",
        "ğŸšŠ",
        "ğŸŸ«",
        "ğŸ¥",
        "\U0001fab2",
        "ğŸš”",
        "\U000e0055",
        "\U0001faa6",
        "ğŸ”£",
        "ğŸº",
        "ğŸ¦ ",
        "ğŸ ",
        "ğŸ”´",
        "ğŸ",
        "ğŸ˜¡",
        "ğŸ¢",
        "ğŸ˜•",
        "â™’",
        "ğŸ’³",
        "ğŸš®",
        "ğŸ”š",
        "ğŸ¤«",
        "ğŸ¦•",
        "ğŸŒ‚",
        "ğŸš“",
        "ğŸ§µ",
        "ğŸ¥¬",
        "ğŸ˜”",
        "ğŸ¥Š",
        "ğŸ›",
        "ğŸ’½",
        "â¬",
        "ğŸˆº",
        "ğŸ¦®",
        "ğŸ¦‰",
        "\U000e0047",
        "ğŸ…",
        "\U000e0050",
        "ğŸ¦",
        "ğŸ¤±",
    }


async def get_random_emoji_list(emoji_list: set) -> list:
    """Generates and returns a list of random emojis from a list of all available emojis.
    Uses secure random generator https://docs.python.org/3.6/library/secrets.html
    """
    return [emoji_list.pop() for x in range(secrets.randbelow(4) + 3)]


async def generate_key(filename):
    """Generates a key in form of a dictionary byte:emoji_list.
    Stores key as key.emojipher. Overwrites existing key if exists!

    1. Generate a list of all emojis.
    2. Generate a dictionary of bytes 0 - 256 and their list of emoji.
    3. Store key as key.emojipher.
    """

    print("ğŸ‘ğŸ‘ Generating key, I am not looking...")

    emojis = await get_all_emojis()

    key = {x: await get_random_emoji_list(emojis) for x in range(0, 256)}

    with open(filename + ".emojipher", "w") as f:
        # Write as string, can evaluate string to dict when reading key.
        f.write(str(key))

    print("ğŸ§‘â€ğŸ’»ğŸ¤ Key has been generated! Keep it safe.")


async def encrypt_data(filename: str, key: str):
    """Encrypts given file with given key. If such file exists, it is deleted!

    1. Load key.
    2. Iterate file bytes.
    2.1. Convert byte to int and find matching key in dict.
    2.2. Pick one random emoji from according list,
    2.3. Append to file.
    """

    print("ğŸ§™ğŸ¼ğŸ”¥ Encrypting your data...")

    with open(key, "r") as fr:
        key = ast.literal_eval(fr.read())

    output_filename = filename + ".encrypted"

    # Remove existing file if needed.
    if os.path.exists(output_filename):
        os.remove(output_filename)

    with open(filename, "rb") as fr:
        byte = fr.read(1)
        while byte != b"":
            # Convert byte to int to match in key dictionary.
            b = int.from_bytes(byte, "little")
            byte = fr.read(1)

            with open(output_filename, "a") as fw:
                # Find matching random emoji and write to file.
                fw.write(secrets.choice(key[b]))

    print(
        "ğŸ•µ ğŸ•µï¸â€â™‚ï¸ Your data has been encrypted and is safe from bioluminescent agents."
    )


async def decrypt_data(filename: str, key: str):
    """Given a filename and a key, decrypts data into original file."""

    print("ğŸ‘€ğŸ‘½ Decrypting data, make sure you are alone!")

    with open(key, "r") as fr:
        key = ast.literal_eval(fr.read())

    # Invert key, aka make each emoji in list of each key into a new key.
    # So one key with list of 5 emojis becomes 5 keys with same value of byte.
    inverted_key = {}
    for k, v in key.items():
        for e in v:
            inverted_key[e] = k.to_bytes(1, "little")

    output_filename = filename.replace(".encrypted", ".decrypted")

    if os.path.exists(output_filename):
        os.remove(output_filename)

    with open(filename, "r", encoding="utf-8") as fr:
        while True:
            c = fr.read(1)
            if not c:
                break

            with open(output_filename, "ab") as fw:
                fw.write(inverted_key[c])

    print("ğŸ‘¨ğŸ»â€ğŸ’»ğŸ–¨ Your data has been decrypted. Have fun!")


if __name__ == "__main__":
    parser = ArgumentParser(
        description=description, formatter_class=RawDescriptionHelpFormatter
    )
    generate = parser.add_argument_group("key generation")
    generate.add_argument("-g", "--generate", type=str, help="key name")
    group = parser.add_mutually_exclusive_group()
    group.add_argument("-e", "--encrypt", type=str, help="file(s) to encrypt")
    group.add_argument("-d", "--decrypt", type=str, help="file(s) to decrypt")
    group.add_argument("-c", "--changelog", action="store_true", help="see whats new!")
    parser.add_argument("-k", "--key", type=str, help="path to key")
    args = parser.parse_args()

    if args.generate:
        # await generate_key(args.generate)
        loop = asyncio.get_event_loop()
        loop.run_until_complete(generate_key(args.generate))
        loop.close()

    elif args.encrypt:
        # await encrypt_data(args.encrypt, args.key)
        loop = asyncio.get_event_loop()
        loop.run_until_complete(encrypt_data(args.encrypt, args.key))
        loop.close()

    elif args.decrypt:
        # await decrypt_data(args.decrypt, args.key)
        loop = asyncio.get_event_loop()
        loop.run_until_complete(decrypt_data(args.decrypt, args.key))
        loop.close()
    elif args.changelog:
        print(changelog)
